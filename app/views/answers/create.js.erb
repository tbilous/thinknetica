var form = $('#new_answer'),
    alert = form.find('#error_validation'),
    message,
    color;

container = $('.attachment-nested .nested-fields');

<% if @answer.errors.any? %>
  color = 'red';

  <% @answer.errors.each do |field, msg| %>
    message = "<%= j msg %>";
    alertFunc(message, color);
  <% end %>
<% else %>
  alert.remove();
  $('#answersList').append('<%= j render @answer %>');

  form.find('#answer_body').val('');

  container.hide();

  message = "<%=j flash[:success] %>";
  color = 'green';
  alertFunc(message, color);

  form.reset();
<% end %>

