var form = $('#new_answer'),
    alert = form.find('#error_validation'),
    message,
    color;

container = $('.attachment-nested .nested-fields');
<% if @answer.errors.any? %>
  color = 'red';

  <% @answer.errors.each do |field, msg| %>
    message = "<%= j  msg %>";
    alertFunc(message, color);
  <% end %>

  <% if flash[:alert].present? %>
    message = "<%=j flash[:alert] %>";
    alertFunc(message, color);
  <% end %>

<% else %>

  $('#answersList').append('<%= j render @answer %>');
  form.find('#answer_body').val('');
  container.toggle();

  <% if flash[:notice].present? %>
    message = "<%=j flash[:notice] %>";
    color = 'green';
    alertFunc(message, color);
  <% end %>

<% end %>

